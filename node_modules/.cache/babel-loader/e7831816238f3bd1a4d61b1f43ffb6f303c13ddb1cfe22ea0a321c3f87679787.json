{"ast":null,"code":"import _objectSpread from\"/home/borgg/dataprox/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{Box,Button,TextField,Typography,Alert,CircularProgress,FormControlLabel,Switch}from'@mui/material';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DataCollection=()=>{const[formData,setFormData]=useState({mongodbUsername:'',mongodbPassword:'',mongodbHost:'',mongodbDatabase:'',mongodbCollection:'',autoRestart:true});const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[success,setSuccess]=useState(null);const handleInputChange=e=>{const{name,value,type,checked}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:type==='checkbox'?checked:value}));};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError(null);setSuccess(null);try{const response=await axios.post('/api/data-collection/run',formData);setSuccess('Data collection started successfully!');}catch(err){setError('Failed to start data collection. Please try again.');console.error('Error:',err);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,sx:{maxWidth:600,mx:'auto'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:\"Data Collection Configuration\"}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:error}),success&&/*#__PURE__*/_jsx(Alert,{severity:\"success\",sx:{mb:2},children:success}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"MongoDB Username\",name:\"mongodbUsername\",value:formData.mongodbUsername,onChange:handleInputChange,margin:\"normal\",required:true}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"MongoDB Password\",name:\"mongodbPassword\",type:\"password\",value:formData.mongodbPassword,onChange:handleInputChange,margin:\"normal\",required:true}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"MongoDB Host\",name:\"mongodbHost\",value:formData.mongodbHost,onChange:handleInputChange,margin:\"normal\",required:true}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"MongoDB Database\",name:\"mongodbDatabase\",value:formData.mongodbDatabase,onChange:handleInputChange,margin:\"normal\",required:true}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"MongoDB Collection\",name:\"mongodbCollection\",value:formData.mongodbCollection,onChange:handleInputChange,margin:\"normal\",required:true}),/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:formData.autoRestart,onChange:handleInputChange,name:\"autoRestart\",color:\"primary\"}),label:\"Auto-restart on failure\",sx:{mt:2}}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",fullWidth:true,sx:{mt:3},disabled:loading,children:loading?/*#__PURE__*/_jsx(CircularProgress,{size:24}):'Start Data Collection'})]});};export default DataCollection;","map":{"version":3,"names":["React","useState","Box","Button","TextField","Typography","Alert","CircularProgress","FormControlLabel","Switch","axios","jsx","_jsx","jsxs","_jsxs","DataCollection","formData","setFormData","mongodbUsername","mongodbPassword","mongodbHost","mongodbDatabase","mongodbCollection","autoRestart","loading","setLoading","error","setError","success","setSuccess","handleInputChange","e","name","value","type","checked","target","prev","_objectSpread","handleSubmit","preventDefault","response","post","err","console","component","onSubmit","sx","maxWidth","mx","children","variant","gutterBottom","severity","mb","fullWidth","label","onChange","margin","required","control","color","mt","disabled","size"],"sources":["/home/borgg/dataprox/src/components/DataCollection.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport {\n  Box,\n  Button,\n  TextField,\n  Typography,\n  Alert,\n  CircularProgress,\n  FormControlLabel,\n  Switch,\n} from '@mui/material';\nimport axios from 'axios';\n\ninterface DataCollectionProps {}\n\nconst DataCollection: React.FC<DataCollectionProps> = () => {\n  const [formData, setFormData] = useState({\n    mongodbUsername: '',\n    mongodbPassword: '',\n    mongodbHost: '',\n    mongodbDatabase: '',\n    mongodbCollection: '',\n    autoRestart: true,\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value, type, checked } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value,\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    setSuccess(null);\n\n    try {\n      const response = await axios.post('/api/data-collection/run', formData);\n      setSuccess('Data collection started successfully!');\n    } catch (err) {\n      setError('Failed to start data collection. Please try again.');\n      console.error('Error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Box component=\"form\" onSubmit={handleSubmit} sx={{ maxWidth: 600, mx: 'auto' }}>\n      <Typography variant=\"h5\" gutterBottom>\n        Data Collection Configuration\n      </Typography>\n\n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\n          {error}\n        </Alert>\n      )}\n\n      {success && (\n        <Alert severity=\"success\" sx={{ mb: 2 }}>\n          {success}\n        </Alert>\n      )}\n\n      <TextField\n        fullWidth\n        label=\"MongoDB Username\"\n        name=\"mongodbUsername\"\n        value={formData.mongodbUsername}\n        onChange={handleInputChange}\n        margin=\"normal\"\n        required\n      />\n\n      <TextField\n        fullWidth\n        label=\"MongoDB Password\"\n        name=\"mongodbPassword\"\n        type=\"password\"\n        value={formData.mongodbPassword}\n        onChange={handleInputChange}\n        margin=\"normal\"\n        required\n      />\n\n      <TextField\n        fullWidth\n        label=\"MongoDB Host\"\n        name=\"mongodbHost\"\n        value={formData.mongodbHost}\n        onChange={handleInputChange}\n        margin=\"normal\"\n        required\n      />\n\n      <TextField\n        fullWidth\n        label=\"MongoDB Database\"\n        name=\"mongodbDatabase\"\n        value={formData.mongodbDatabase}\n        onChange={handleInputChange}\n        margin=\"normal\"\n        required\n      />\n\n      <TextField\n        fullWidth\n        label=\"MongoDB Collection\"\n        name=\"mongodbCollection\"\n        value={formData.mongodbCollection}\n        onChange={handleInputChange}\n        margin=\"normal\"\n        required\n      />\n\n      <FormControlLabel\n        control={\n          <Switch\n            checked={formData.autoRestart}\n            onChange={handleInputChange}\n            name=\"autoRestart\"\n            color=\"primary\"\n          />\n        }\n        label=\"Auto-restart on failure\"\n        sx={{ mt: 2 }}\n      />\n\n      <Button\n        type=\"submit\"\n        variant=\"contained\"\n        color=\"primary\"\n        fullWidth\n        sx={{ mt: 3 }}\n        disabled={loading}\n      >\n        {loading ? <CircularProgress size={24} /> : 'Start Data Collection'}\n      </Button>\n    </Box>\n  );\n};\n\nexport default DataCollection; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}